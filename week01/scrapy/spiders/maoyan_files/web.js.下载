!function(){"use strict";var u=!0,n="_MeiTuanALogObject",l=1,r="dianping_nova",h="waimai",m="group",c="demo",g="4.17.0",_="lxcuid",y="uuid",b="msid",w="cityid",A="utm",x="uid",S="userid",k="dpid",O="appnm",s="union_id",v="web_env",q="wxmp_env",p="pd_data",I=/^(([^? \r\n]*)\?)?([^?# \r\n]+)(#\S+)?$/,D=setTimeout,f=clearTimeout,d=1,a=2,j=3,E=4,e=5,i=6,o=20,C=7;function T(t){var n=t;return t&&t.code&&(n=t.code),n===d?"E_TIME_OUT":n===a?"E_NO_JSBRIDGE":n===j?"E_KNB_FAIL":n===E?"E_KNB_CB_FAIL":n===e?"E_KNB_NOT_EXIST":n===o?"ERR_PARAMS":n===i?"E_KNB_METHOD_NOT_SUPPORT":"unknown error: "+n}var M=200,N=500,F=-1,R="PV",P="PD",L="MC",V="SC",B="MV",J="MVL",U="ME",W="BO",K="BP",Q="event_type",X="val_act",$="val_cid",z="index",H="element_id",G="lx_inner_data",Z="pageView",Y="systemCheck",tt="moduleClick",nt="order",et="order_id",rt=1e3,it=2,ot=0,at=-1,ut=0,ct=1,st=10080,ft=1576800,dt=30,lt="_lx_utm",vt="_lxsdk",pt="_lxsdk_cuid",ht="_lxsdk_dpid",mt="_lxsdk_s",gt="latlng",_t="_lxsdk_rr",yt="_lxsdk_rc",bt="msid",wt="ms",xt="category",St="c",kt="login_type",Ot="lt",qt="locate_city_id",It="lci",jt="sdk_ver",At="sv",Dt="lxcuid",Et="lxid",Ct="val_lab",Tt="val_bid",Mt="val_val",Nt="sf",Ft="sdk_env",Rt="online",Pt="offline",Lt="__$lx_beacon_",Vt={category:u,union_id:u,lxcuid:u,app:u,sdk_ver:u,appnm:u,ch:u,lch:u,ct:u,did:u,dm:u,ua:u,msid:u,uuid:u,lat:u,log:u,net:u,os:u,idfa:u,pushid:u,subcid:u,mac:u,imsi:u,uid:u,logintype:u,cityid:u,apn:u,mno:u,pushSetting:u,wifi:u,bht:u,ip:u,vendorid:u,geohash:u,dtk:u,sns:u,android_id:u,version_code:u,brand:u,utm:u},Bt="post",Jt="__lxvalidation",Ut="report.meituan.com",Wt="wreport1.meituan.net",Kt="hreport.meituan.com",Qt=-3,Xt=function(){};function t(){return window}function $t(){return t().XMLHttpRequest}var zt,Ht,Gt=(zt=$t(),Ht=zt&&"withCredentials"in new zt,function(){return Ht}),Zt=/__lxvalidation=([\w.]+)/i,Yt=10,tn=!1,nn=void 0,en=void 0,rn={};function on(t){var n,e=0===Oe().indexOf("http:")?"http:":"https:",r=e+"//"+t+"/",i=Pn.search.match(Zt)||[],o=function(){var t=de.get(Jt);if(t){var n=t.split("|");return{mis:n[0],env:n[1]||""}}return t||{}}();return(n=i&&i[1]||o.mis||"")&&(de.top(Jt,n+"|",Yt),r=e+"//"+t+"/?mis="+n,an.debug=n),r}var an={nt:ot,inWXMP:!1,pageValLab:null,pageEnv:null,use_post:!1,cid:null,appnm:null,quit:null,useQR:!1,onWebviewAppearAutoPV:!0,positiveLab:!0,nativeSDKVer:null,cacheRetryMinutes:5,debug:!1,autoPD:!0,sessionScope:"top",isDev:!1},un=[];an.on=function(t,n){un.push({name:t,fn:n})};var cn={MVL:!(an.emit=function(r,i,o,a,u){ue.each(un,function(t){var n=t.name,e=t.fn;n===r&&e(i,o,a,u)})}),QR:!1,getReqId:!1};function sn(t){return!!cn[t]}var fn={cv:"prod",web:1,proxy:"function"==typeof window.Proxy&&/native code/.test(window.Proxy.toString())?1:0};function dn(t,n){t&&!n?delete fn[t]:fn[t]=n}function ln(t){return t?fn[t]:fn}function vn(t,n){re.isStr(t)&&(rn[t]=n)}function pn(t){tn=t}function hn(){return tn===l}function mn(t){return nn&&!t||(nn=on(Ut)),nn}var gn=[Wt,"wreport2.meituan.net"],_n=0;function yn(t){if(!en||t){var n=gn[parseInt(_n++%12/6)];en=on(n)}return en}var bn=void 0;function wn(){if(Un!==bn)return bn;var t=Ln.getElementsByTagName("meta");return bn="off"===ge(t,"lx:native-report")}var xn=ot;function Sn(){return xn}function kn(t){wn()||(xn=t)}var On=!1;function qn(t){On=!!t}var In=5e3,jn=50,An={MVL:{}},Dn=void 0,En=void 0;function Cn(t,n,e,r){r=r||{};var i=n.category,o=e.req_id,a=e.val_cid,u=e.val_bid,c=r.tag;if(An[t]&&re.isStr(t)&&re.isStr(i)&&re.isStr(o)&&re.isStr(a)&&re.isStr(u)){var s=i+"_"+o+"_"+a+"_"+u,f=An[t];re.isObj(f[s])||(f[s]={env:re.extend(!0,{},n),evs:e,lab:[]}),re.isObj(c)&&(f[s].evs.tag=c);var d=re.extend(!0,e.val_lab,{_seq:e.seq,_tm:e.tm});f[s].lab.push(d),function(){var t=0;for(var n in An){var e=An[n];for(var r in e){var i=e[r].lab;t+=i.length||0}}jn<t&&Nn()}()}}function Tn(t,n){var e=(n||{}).withUnload,r=An[t];if(re.isObj(r)){var i=[];for(var o in r){var a=r[o],u=!1;if(a.lab&&a.lab.length){var c=a.env,s=a.evs,f={mv_list:a.lab,custom:{_withUnload:!!e}};s.val_lab=f;for(var d=0,l=i.length;d<l;d++){var v=i[d];if(!Mn(v,c)){v.evs.push(s),u=!0;break}}u||(c.evs=[s],i.push(c))}}i.length&&En.send(i),An[t]={}}}function Mn(t,n){var e=0,r=0;for(var i in t)t.hasOwnProperty(i)&&e++;for(var o in n)n.hasOwnProperty(o)&&r++;var a=r<e?t:n,u=e<=r?t:n;for(var c in a){if(!(-1<"evs|".indexOf(c+"|")))if(re.isObj(a[c])&&re.isObj(u[c])){if(Mn(a[c],u[c]))return!0}else if(a[c]!==u[c])return!0}return!1}function Nn(t){var n=(t||{}).withUnload;for(var e in An)Tn(e,{withUnload:n})}D(function t(){clearTimeout(Dn);try{Nn()}catch(t){}finally{Sn()===ot?Dn=D(t,In):clearTimeout(Dn)}},100);var Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rn=t(),Pn=location,Ln=document,Vn=Ln.domain,Bn=navigator,Jn=Bn.userAgent.toString(),Un=void 0,Wn=Array.prototype,Kn=Object.prototype,Qn=decodeURIComponent,Xn=encodeURIComponent,$n=te(),zn=Kn.toString,Hn=Kn.hasOwnProperty;function Gn(){}function Zn(t){return void 0===t?"undefined":Fn(t)}function Yn(t,n){return Zn(t)===n}function te(){return+new Date}function ne(){return Math.random()}function ee(t){return Yn(t,"number")}var re={};function ie(t,e,r){var i=void 0,o=!0===t;return o||(r=e,e=t),e&&re.isObj(e)||(e={}),r&&re.isObj(r)||(r={}),ue.each(r,function(t,n){o&&re.isObj(r[n])?(i=e[n],e[n]=re.isObj(i)?i:{},ie(o,e[n],r[n])):e[n]=r[n]}),e}re.trim=function(t){return t.replace(/^[\s\uFEFF\xA0\u3000]+|[\s\uFEFF\xA0\u3000]+$/g,"")},re.now=te,re.rnd=ne,re.hasOwn=function(t,n){return Hn.call(t,n)},re.extend=ie;var oe=function(t){return t&&"[object Object]"===zn.call(t)};re.isObj=oe;var ae=function(t){return Yn(t,"string")};re.isStr=ae,re.isFunc=function(t){return Yn(t,"function")},re.attr=function(t,n){return t.getAttribute(n)},re.parseQuery=function(t){var i={};if(t){var n=t.replace(I,function(t,n,e,r){return r||""}).split("&");return ue.each(n,function(t){var n=t.split("="),e=n[0],r=n.slice(1).join("")||"";e&&!Hn.call(i,e)&&(i[e]=Qn(r))}),i}},re.stringifyQuery=function(t){var r=[];return re.isObj(t)&&ue.each(t,function(t,n){var e;re.isFunc(t)||(Un!==t&&((e=t)||!Yn(e,"object"))||(t=t||""),r.push(Xn(n)+"="+Xn(t)))}),r.join("&")},re.genReqId=function(){return""+1e3*te()+parseInt(1e3*ne())},re.run=function(t,n){ce(t)?ue.each(t,n):n(t)},re.on=function(t,n,e){t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent&&t.attachEvent("on"+n,e)},re.off=function(t,n,e){t.removeEventListener?t.removeEventListener(n,e,!1):t.detachEvent&&t.detachEvent("on"+n,e)};var ue={isArray:function(t){return"[object Array]"===zn.call(t)}},ce=function(t){if(!t)return!1;var n=t.length;return!!ue.isArray(t)||!!(t&&ee(n)&&0<=n)&&(!re.isObj(t)||(!(1<n)||n-1 in t))};ue.isArrayLike=ce,ue.find=function(e,r,i){var o=void 0;return ce(e)&&ue.each(e,function(t,n){if(!0===r.call(i,t,n,e))return o=t,!1}),o},ue.filter=function(e,r,i){var o=[];return ce(e)&&ue.each(e,function(t,n){r.call(i,t,n,e)&&o.push(t)}),o},ue.toArray=function(t,n,e){var r=[];return ce(t)&&ue.each(t,function(t){r.push(n?n.call(e,t):t)},e),r};var se=function(t,n,e){if(t){var r=void 0,i=void 0,o=void 0;if(ce(t))for(i=0,o=t.length;i<o&&!1!==n.call(e,t[i],i,t);i++);else for(r in t)if(re.hasOwn(t,r)&&!1===n.call(e,t[r],r,t))break}};ue.each=se;var fe=function(t,n,e){if(t){for(var r=[],i=0,o=t.length;i<o;i++){var a=n.call(e,t[i],i,t);r.push(a)}return r}};ue.slice=function(t,n,e){return Wn.slice.call(ue.toArray(t),n,e)},ue.reduce=function(t,n){if(ce(t)&&re.isFunc(n)){var e=t,r=e.length>>>0,i=0,o=void 0,a=arguments;if(3===a.length)o=a[2];else{for(;i<r&&!(i in e);)i++;if(r<=i)return;o=e[i++]}for(;i<r;)i in e&&(o=n(o,e[i],i,e)),i++;return o}};var de={};function le(t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=void 0,r=void 0,i=void 0,o=void 0,a=void 0,u=0,c=0,s="",f=[];if(!t)return t;for(t=ve(t);e=(a=t.charCodeAt(u++)<<16|t.charCodeAt(u++)<<8|t.charCodeAt(u++))>>18&63,r=a>>12&63,i=a>>6&63,o=63&a,f[c++]=n.charAt(e)+n.charAt(r)+n.charAt(i)+n.charAt(o),u<t.length;);switch(s=f.join(""),t.length%3){case 1:s=s.slice(0,-2)+"==";break;case 2:s=s.slice(0,-1)+"="}return s}function ve(t){var n,e="",r=void 0,i=void 0,o=void 0;for(r=i=0,n=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,o=0;o<n;o++){var a=t.charCodeAt(o),u=null;a<128?i++:u=127<a&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==u&&(r<i&&(e+=t.substring(r,i)),e+=u,r=i=o+1)}return r<i&&(e+=t.substring(r,t.length)),e}de.del=function(t,n){var e=t+"=;path=/;domain="+n,r=new Date;return r.setFullYear(1970),e+=";expires="+r.toUTCString(),Ln.cookie=e,!0},de.get=function(t){var n=Ln.cookie.match(new RegExp("(?:^|;)\\s*"+t+"=([^;]+)"));return Qn(n?n[1]:"")},de.set=function(t,n,e,r){r=r||Ln.domain;var i=void 0,o=void 0,a=void 0,u=t+"="+Xn(n)+";path=/;domain="+r;Un===e||isNaN(e)||(i=new Date,o=60*parseInt(e,10)*1e3,a=i.getTime()+o,i.setTime(a),u+=";expires="+i.toUTCString());try{return Ln.cookie=u,!0}catch(t){return!1}},de.top=function(t,n,e){var r=Ln.domain,i=r.split("."),o=i.length,a=o-1,u=void 0,c=!1;for(n=""+n;!c&&0<=a&&(r=i.slice(a,o).join("."),de.set(t,n,e,r),u=de.get(t),Un!==u&&(c=u===n),a--,!c););},de.del=function(t){return de.top(t,"",-100)};var pe=window.btoa,he=le;dn("btoa",!!window.btoa),dn("atob",!!window.atob);try{re.isFunc(pe)&&pe(ve(Jn))===le(Jn)&&(he=function(t){return pe(ve(t))})}catch(t){}var me=he;function ge(t,n){var e=void 0,r=ue.find(t,function(t){return re.attr(t,"name")===n});return r&&(e=re.attr(r,"content")),e}function _e(){var t=Rn[n];return Rn[t]}var ye,be=(ye=void 0,{update:function(t){ye=t},get:function(){return ye}});function we(t){var n=t||te(),e=_e();be.update(n),$n=n,e&&(e.l=n)}function xe(){var t={duration:function(){var t=void 0,n=be.get(),e=te();if(n)t=n,be.update(e);else{var r=_e(),i=Rn.performance&&Rn.performance.timing;(t=i&&i.requestStart)||(t=r?r.l:$n),be.update(e)}return e-t}()},n=void 0,e=an.quit;return re.isFunc(e)&&(n=e()||{}),t=re.extend(t,n||{})}function Se(t,n){n[et]}var ke=2032;function Oe(){return Pn.protocol}/trident/i.test(Jn)||/msie/i.test(Jn)||!/mozilla.+webkit.+chrome.+/i.test(Jn)||(ke=6e3);var qe=0;function Ie(t,n){var e=/^((\d+\.)+\d+).*$/;if("string"!==Zn(t)||"string"!==Zn(n))return NaN;if(!e.test(t)||!e.test(n))return NaN;for(var r=t.replace(e,"$1").split("."),i=n.replace(e,"$1").split("."),o=0,a=Math.max(r.length,i.length);o<a;o++){if(!r[o]||!i[o])(!r[o]&&r||!i[o]&&i).push("0");var u=r[o].toString().length,c=i[o].toString().length;if(u!==c){var s=c<u?i:r;s[o]=Array(Math.abs(u-c)+1).join("0")+s[o].toString()}}var f=parseInt(r.join("")),d=parseInt(i.join(""));return f==d?0:d<f?1:-1}function je(e,r,i,o,a,u,c){return function(t){if(an.autoPD&&!e){e=!0;try{if(r&&new Date-i<50)return;if(o)return;if(o=!1,!c()){var n=xe();a("pageDisappear",n,{isAuto:6,shouldStore:!0})}Nn({withUnload:!0})}catch(t){}u&&u(t)}}}var Ae=4,De="",Ee=function(t){Ae=t},Ce=function(){return De&&3===Ae},Te=function(t){De=t},Me=function(){return De},Ne=void 0;try{Ne=Rn.sessionStorage}catch(t){Ne=null}var Fe=void 0;Fe=re.isFunc(Rn.atob)?Rn.atob:function(t){return t};var Re={},Pe=function(t,n){if(Re[t])try{Re[t](n),D(function(){delete Re[t]},0)}catch(t){}},Le=Jn,Ve=[{n:c,r:/lingxi\/demo\/\d+/i,v:Le},{n:r,r:/dp\/com\.dianping\.[\w.]+\/([\d.]+)/i,v:Le},{n:h,r:/\bmeituanwaimai-c\/\d+\./i,v:Le},{n:"moviepro",r:/\bmoviepro/i,v:Le},{n:"movie",r:/\bmaoyan\b/i,v:Le},{n:m,r:/\bmeituan \d+|meituangroup\/\d+\./i,v:Le}],Be=/android/i.test(Le),Je="",Ue=Be,We=!1,Ke=!1,Qe="www",Xe=!1;if(/\bandroid|mobile\b|\bhtc\b/i.test(Le)){Qe="i",Ue=!0,ue.each(Ve,function(t){if(t.r.test(t.v))return Je=t.n,!1}),/\btitans(no){0,1}x\b/i.test(Le)&&(We=!0);var $e=/iphone/i.test(Le),ze=/ipad/i.test(Le);($e||ze)&&(Ke=!0),Je&&($e?Qe="iphone":/android/i.test(Le)?Qe="android":ze&&(Qe="ipad"))}else{var He=Le.match(/(msie) (\d+)|Trident\/(d+)/i);He&&(Xe=!0,He&&parseInt(He[2],10))}var Ge,Ze,Ye,tr,nr=Rn.screen.width+"*"+Rn.screen.height,er=!/Chrome/.test(Le)&&!Xe&&/Mozilla.+AppleWebKit.+Version.+Safari.+/.test(Le),rr=Jn.replace(/^.*TitansX\/([\d.]+)\s.*$/i,"$1"),ir=!(!Ue||!/\sMMP\//.test(Le)),or=!(!Ue||!/\sMicroMessenger/.test(Le)||ir),ar=We||/ knb\/\d+/i.test(Jn),ur=function(){return Ue&&ar&&!or&&!ir},cr=Rn.JSON;cr||(cr={parse:function(t){return new Function("return ("+t+")")()},stringify:(Ge=ue.isArray,Ze={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},Ye=function(t){return Ze[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},tr=/[\\"\u0000-\u001F\u2028\u2029]/g,function t(n){if(null==n)return"null";if(Yn(n,"number"))return isFinite(n)?n.toString():"null";if(Yn(n,"boolean"))return n.toString();if(Yn(n,"object")){if("function"===Zn(n.toJSON))return t(n.toJSON());if(Ge(n)){for(var e="[",r=0;r<n.length;r++)e+=(r?", ":"")+t(n[r]);return e+"]"}if(re.isObj(n)){var i=[];for(var o in n)n.hasOwnProperty(o)&&i.push(t(o)+": "+t(n[o]));return"{"+i.join(", ")+"}"}}return'"'+n.toString().replace(tr,Ye)+'"'})});var sr=cr;function fr(t){return t}function dr(t){try{t(gr(this,vr),gr(this,lr))}catch(t){if(this._state===pr)return yr(new dr(fr),lr,t)}}dr.prototype.then=function(t,n){return function(t,n,e,r){Zn(e)===hr&&(n._onFulfilled=e);Zn(r)===hr&&(n._onRejected=r);t._state===pr?t[t._pCount++]=n:_r(t,n);return n}(this,new dr(fr),t,n)},dr.all=function(l){return new dr(function(r,e){for(var t,n,i,o=0,a=l.length,u=[],c=0,s=void 0,f=function(e){return function(t){if(e.value=t,e.state=vr,++c===e.len&&!s){var n=function(t){var n=[];for(o=0;o<a;o++)n.push(t[o]?t[o].value:void 0);return n}(u);r(n)}}},d=function(n){return function(t){n.value=t,n.state=lr,c++,s||(s=!0,e(t))}};o<a;o++)n=t=void 0,n=l[o],i={value:null,index:o,state:null,len:a},u.push(i),t=i,n.then?n.then(f(t),d(t)):dr.resolve(n).then(f(t),d(t))})},dr.resolve=function(n){if(n instanceof dr)return n;if(re.isFunc(n.then)){var e=n.then.bind(n);return new dr(function(t,n){e(t,n)})}return new dr(function(t){t(n)})},dr.reject=function(e){return new dr(function(t,n){n(e)})};var lr=0,vr=1,pr=2,hr="function",mr="object";function gr(n,e){return function(t){return yr(n,e,t)}}function _r(e,r){return setTimeout(function(){var t=void 0,n=e._state?r._onFulfilled:r._onRejected;if(void 0!==n){try{t=n(e._value)}catch(t){return void yr(r,lr,t)}br(r,t)}else yr(r,e._state,e._value)})}function yr(t,n,e){if(t._state===pr){t._state=n,t._value=e;for(var r=0,i=t._pCount;r<i;)_r(t,t[r++]);return t}}function br(n,t){if(t!==n||!t){var e=void 0,r=Zn(t);if(null===t||r!==hr&&r!==mr)yr(n,vr,t);else{try{e=t.then}catch(t){return void yr(n,lr,t)}Zn(e)===hr?function(n,e,t){try{t.call(e,function(t){e&&(e=null,br(n,t))},function(t){e&&(e=null,yr(n,lr,t))})}catch(t){e&&(yr(n,lr,t),e=null)}}(n,t,e):yr(n,vr,t)}return n}yr(n,lr,new Error("promise_circular_chain"))}dr.prototype._state=pr,dr.prototype._pCount=0;var wr,xr=!Xe&&Rn.indexedDB,Sr=Rn.IDBFactory,kr=xr&&re.isFunc(xr.open)&&xr.constructor===Sr,Or=!1,qr=void 0,Ir=void 0,jr=void 0,Ar=60*(parseInt(an.cacheRetryMinutes)||5),Dr=!1,Er=0;function Cr(){return new dr(function(n,e){if(!kr)return e();if(Or)return n();try{(qr=xr.open("_lxsdk_db",1e3)).onsuccess=function(t){Or=!0,Ir=t.target.result,n()},qr.onupgradeneeded=function(t){Ir=t.target.result,(jr=Ir.createObjectStore("cache",{keyPath:"id",autoIncrement:!0})).createIndex("evs","evs",{unique:!1}),jr.createIndex("type","type",{unique:!1})}}catch(t){Or=!1,e()}})}function Tr(){Cr().then(function(){var e=Ir.transaction(["cache"],"readwrite").objectStore("cache"),t=e.openCursor(),r=[];t.onsuccess=function(t){var n=t.target.result;n?(r.push(n.value),n.continue()):(Er=r.length,r.forEach(function(t){!function(t){if("get"===t.type){var n=document.createElement("img"),e=Math.random();n.src="//"+Wt+"/?d="+me("["+t.evs+"]")+"&t=1&r="+e+"&_lxsdk_rnd="+e,n.id=e,window["img_"+e]=n}else try{window.navigator.sendBeacon("//"+Ut,t)}catch(t){}}(t),e.delete(t.id)}))}})}Cr();var Mr={add:function(t,e){Cr().then(function(){var n=Ir.transaction(["cache"],"readwrite").objectStore("cache");100<Er&&n.clear(),t.forEach(function(t){t.evs.forEach(function(t){t[G]=t[G]||{},t[G].fc=1}),n.add({type:e,evs:JSON.stringify(t)})})})},size:function(){},remove:function(){},check:Tr,startPoll:function(){!Dr&&kr&&(Dr=!0,wr=+new Date,Cr().then(function(){setTimeout(function t(){var n="_lxsdk_rc_img",e=Rn[n]=new Image;e.onload=function(){Tr(),Dr=!1,Rn[n]=null},e.onabort=e.onerror=function(){+new Date-wr>1e3*Ar||(setTimeout(t,6e3),Rn[n]=null)},e.src="//"+Wt+"/?r="+Math.random()},6e3)}))}},Nr=3,Fr=150,Rr=5e3,Pr=3500,Lr=!1,Vr=[],Br=[],Jr=0,Ur=0,Wr=!an.use_post,Kr=Be&&/baiduboxapp\//.test(Le)||/Mozilla.+AppleWebKit.+Chrome.+Safari.+/i.test(Le)&&!Ue,Qr=!Xe&&re.isFunc(Bn.sendBeacon);function Xr(t,n,e,r,i){var o=[{project:"web-lx-sdk",pageUrl:Pn.href,resourceUrl:t,category:i?"jsError":"ajaxError",sec_category:"prod_"+n,level:"error",unionId:e,timestamp:re.now(),content:""+r||""}],a=Yr("//catfront.dianping.com/api/log?v=1",Bt,"application/x-www-form-urlencoded");a&&(a.onerror=a.onreadystatechange=function(){},a.send("c="+encodeURIComponent(sr.stringify(o))))}function $r(t,n){if(Nr<=Ur)return!1;n=re.extend({cb:Gn},n||{});var e=mn();Wr=!er&&!an.use_post;try{Wr?function(e,r){var t=te().toString(16)+Jr++,i=mn(),o=!1,a=!1,u=void 0,c=void 0,s=(n=e,f=[],d=[{l:jt,s:At},{l:bt,s:wt},{l:xt,s:St},{l:kt,s:Ot},{l:Dt,s:Et},{l:qt,s:It}],ue.each(n,function(t){var n=re.extend(!0,{},t);ue.each(d,function(t){ti(n,t.l,t.s)});var e=[];ue.each(t.evs,function(r){r=re.extend(!0,{},r),ue.each(r,function(t,n){if(-1<n.indexOf("val_")&&(r[n.replace("val_","")]=r[n],delete r[n]),ti(r,"refer_url","urlr"),r[n]&&"url"===n){var e=Pn.hash;e&&(r.urlh=e),delete r[n]}}),e.push(r)}),n.evs=e,n[Et]===n.uuid&&delete n.uuid;var r=n[St];r&&(n[St]=r.replace("data_sdk_","")),delete n.ua,f.push(n)}),f);var n,f,d;if(ue.each(s,function(t){c=t.uuid||t.lxid,delete t.ua}),!function(t){for(var n=t.length,e=n,r=0;r<n;r++)127<t.charCodeAt(r)&&e++;return 1.5*e<ke}(u=sr.stringify(s)))return ue.each(e,function(t){ue.each(t.evs,function(t){var n=t.val_lab;t.val_lab=re.extend(!0,{custom:{_s:1}},n||{})})}),Gr(i,e,{cb:function(t,n){try{r(t,n,"ajax-post")}catch(t){}t!==M&&(!o&&Qr&&(o=!0,zr(i,e)),a||(a=!0,Xr(location.host+location.pathname,"ajax-post-"+t+"-"+n,c,u)))}});var l=me(u),v=Xn(l),p=yn(!0);p+=-1<p.indexOf("?")?"&d="+v:"?d="+v,v.length,p=p+"&t=1&r="+t,Kr?Gr(p,null,{method:"get",cb:function(t,n){try{r(t,n,"ajax-get")}catch(t){}t!==M&&(!o&&Qr&&(o=!0,zr(i,e),Mr.add(s,"get"),Mr.startPoll()),a||(a=!0,Xr(location.host+location.pathname,"ajax-get-"+t+"-"+n,c,u)))}}):function t(n,e,r){var i=void 0,o=Lt+qe++;if(e=e||{},!(2<(r=r||0)))return Rn[o]=i=new Image,i.onload=function(){re.isFunc(e.cb)&&e.cb(!0),Rn[o]=null},i.onabort=i.onerror=function(){Rn[o]=null,D(function(){t(n,e,++r)},100)},i.src=n,i;re.isFunc(e.cb)&&e.cb(!1)}(p,{cb:function(t){if(t)try{r(M,200,"image-get")}catch(t){}else{try{r(Qt,0,"ajax-get-to-image-get")}catch(t){}!o&&Qr&&(o=!0,zr(i,e),Mr.add(s,"get"),Mr.startPoll()),a||(a=!0,Xr(location.host+location.pathname,"image-get-500-0",c,u))}}})}(t,n.cb):Gr(e,t,n)||Xe&&Hr(e,t,n)||zr(e,t)&&n.cb(M)}catch(t){return Xr(Pn.path,"report-ajax",0,t.message,!0),!1}return!0}function zr(t,n){var e=Bn.sendBeacon;return!!e&&(ue.each(n,function(t){ue.each(t.evs,function(t){t[G]=re.extend(!0,{},t[G]),t[G].beacon="1"})}),t=Zr(t),e&&e.call(Bn,t,sr.stringify(n)))}function Hr(t,n,e,r){if(!Rn.XDomainRequest)return!1;try{var i=new XDomainRequest;return i.open(Bt,Zr(t),!0),i.onload=function(){Ur=0,e&&e.cb(M,200,"IEXDR-post"),Vr=[]},i.onerror=function(){Ur++,e&&e.cb(N,0,"IEXDR-post")},i.ontimeout=function(){Ur++,r||(!function(t,n,e,r){Vr=Vr.concat(n);var i=void 0,o=ue.reduce(Vr,function(t,n){return n.evs=t.evs.concat(n.evs),i=n.evs.length,Fr<i&&ue.slice(n.evs,i-Fr,i),n});if(Vr=[o],Br.push(r),!Lr)var a=setInterval(function(){if(Nr<=Ur)return clearInterval(a),!1;e(t,Vr,function(n){clearInterval(a),Lr=!1,ue.each(Br,function(t){t&&t(n)})},!0)},Pr)}(t,n,Hr,e),Lr=!0)},i.timeout=Rr,i.send(sr.stringify(n)),!0}catch(t){return!1}}function Gr(n,e,r,i){if(!Gt())return!1;try{var o=r&&r.method||Bt,a=re.isFunc(r.cb)&&r.cb||Xt,u=Yr(n,o,"text/plain");return u.onreadystatechange=function(){if(4===u.readyState){var t=u.status;200<=t&&t<400?(Ur=0,a(M,u.status,"ajax-"+o),Vr=[]):i?a(F,u.status,"ajax-"+o):Gr(n,e,r,!0),u.onreadystatechange=null}},u.onerror=function(){a(N,u.status,"ajax-"+o)},u.send(o===Bt&&sr.stringify(e)||null),!0}catch(t){return Xr(n,"runtime",0,t.stack||t.message),!1}}function Zr(t){var n="_lxsdk_rnd="+(te().toString(16)+Jr);return-1===t.indexOf("?")?t+"?"+n:t+"&"+n}function Yr(t,n,e){var r=new($t());return r.open(n||Bt,Zr(t),!0),r.timeout=Rr,r.setRequestHeader("Content-Type",e),r}function ti(t,n,e){return Hn.call(t,n)&&t[n]&&(t[e]=t[n],delete t[n]),t}var ni="performance",ei="getEntries",ri="pvid-"+parseInt(1e7*re.rnd())+"-"+parseInt(1e7*re.rnd());if(Rn&&Rn[ni]&&Rn[ni][ei]&&re.isFunc(Rn[ni][ei])&&/\[native code\]/.test(Rn[ni][ei].toString())){var ii=Rn[ni][ei]();se(ii,function(t){try{t&&"script"===t.initiatorType&&/(lx|analytics)\.meituan\.net/.test(t.name)&&(dn("stime",t.duration||t.responseEnd-t.startTime),dn("pvid",ri))}catch(t){Xr(Pn.href,"",ri,t.stack||t.message,!0)}})}var oi=A+"_source",ai=A+"_medium",ui=A+"_term",ci=A+"_campaign",si=A+"_content",fi=void 0,di=!1;function li(t){if(!t)return Un;var e=Un,r=/^utm_(source|medium|term|content|campaign)$/;return ue.each(t,function(t,n){r.test(n)&&(!e&&(e={}),e[n]=t)}),e}function vi(t){if(t){fi=t;var n=re.stringifyQuery(t);return de.del(lt,Vn),de.top(lt,n,st,Vn),!0}return!1}function pi(t,n){var o,e,r,i,a;return(!fi&&!di||t)&&(t=t||Pn.href,n=n||Ln.referrer,a=t,(fi=li(re.parseQuery(a))||function(t){var n=Un,e=t.match(/^[\w-]+:\/\/([^/]+)(?:\/([^?]+)?)?/),a=e&&e[1];if(a){var u=re.parseQuery(t),r="daum:q eniro:search_word naver:query pchome:q images.google:q google:q yahoo:p msn:q bing:q aol:query aol:q lycos:q lycos:query ask:q cnn:query virgilio:qs baidu:wd baidu:word alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.ne:MT search.smt.docomo:MT onet:qt onet:q kvasir:q terra:query rambler:query conduit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q go.mail.ru:q centrum.cz:q 360.cn:q sogou:query tut.by:query globo:q ukr:q so.com:q haosou.com:q auone:q m.baidu:word wap.baidu:word baidu:word Baidu:bs www.soso:w wap.soso:key www.sogou:query wap.sogou:keyword m.so:q m.sogou:keyword so.com:pq youdao:q sm.cn:q sm.cn:keyword haosou:q".split(" "),c="",s="";ue.each(r,function(t){var n=t.split(":"),e=n[0],r=n[1],i=u[r],o=-1<e.indexOf(".")?e:"."+e+".";if(-1<a.indexOf(o.toLowerCase())&&(s=e,c=i))return!1}),s&&((n={})[oi]=s,n[ai]="organic",c&&(n[ui]=c))}return n}(n))?vi(fi):(i=de.get(lt),fi=I.test(i)?li(re.isStr(i)?re.parseQuery(i):null):fi),fi||(o=void 0,e=de.get("__utmz"),(r=e&&e.match(/(utmc(tr|sr|cn|md|ct))=([^|()]+)/g))&&ue.each(r,function(t){var n=t.split("="),e=n[0],r=void 0,i=n[1]||"";"utmcsr"===e?r=oi:"utmccn"===e?r=ci:"utmcmd"===e?r=ai:"utmcct"===e?r=si:"utmctr"===e&&(r=ui),r&&((o=o||{})[r]=i)}),vi(fi=o)),di=u),fi}var hi="__lxsdk_",mi=void 0;try{mi=Rn.localStorage}catch(t){mi=null}function gi(t){return hi+t}function _i(){return{length:0,_data:{},setItem:function(t,n){return this.length++,this._data[t]=String(n)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:Un},removeItem:function(t){return this.length--,delete this._data[t]},clear:function(){return this.length=0,this._data={}},key:function(t){var n=[],e=this._data;return ue.each(e,function(t){re.hasOwn(e,t)&&n.push(t)}),n[t]}}}var yi={get:function(t){t=gi(t);var n=mi.getItem(t);return n=Un!==n?sr.parse(n):n},set:function(t,n){yi.del(t);try{return mi.setItem(gi(t),sr.stringify(n))}catch(t){}},keys:function(){for(var t=[],n=void 0,e=0;e<mi.length;e++)0===(n=mi.key(e)).indexOf(hi)&&t.push(n.replace(hi,""));return t},del:function(t){try{return mi.removeItem(gi(t))}catch(t){}},clear:function(){for(var t=this.keys(),n=0;n<t.length;n++)this.del(t[n])}};if(mi){if(mi){var bi="___lxtest";yi.nt=!0;try{yi.set(bi,1),1!==yi.get(bi)?yi.clear():yi.del(bi)}catch(t){try{yi.clear(),mi.setItem(bi,1),mi.removeItem(bi)}catch(t){mi=_i(),yi.nt=!1}}}}else mi=_i(),yi.nt=!1;var wi="tag",xi=18e5;function Si(t,n,e,r,i,o){var a={};a.c=t,a.k=n,a.v=e,a.t=r||+new Date,a.u=i||"",a.r=o||"",this.toJSON=function(){return re.extend(!0,{},a)}}var ki={set:function(t,n,e){var r=void 0,i=[],o=yi.get(wi)||[];if(!re.isStr(n)||""===n)return!1;for(var a=0,u=o.length;a<u;a++)Oi(r=o[a])||(t===r.c?n!==r.k&&i.push(r):i.push(r));return r=new Si(t,n,e,+new Date),i.push(r.toJSON()),yi.set(wi,i),!0},get:function(t,n){var e=void 0,r=yi.get(wi);if(r&&r.length)return e={},ue.each(r,function(t){var n={};n[t.k]=t.v,Oi(t)||(e[t.c]=re.extend(!0,e[t.c]||{},n))}),t&&n?e[t]&&e[t][n]:t?e[t]:e},getAll:function(){var t=yi.get(wi),e={},r=void 0;return ue.each(t,function(t){var n=void 0;!Oi(t)&&t.v&&(r=!0,(n={})[t.k]=t.v,e[t.c]=re.extend(!0,e[t.c],n))}),r&&e},clear:function(n,e){if(!arguments.length)return yi.set(wi,[]);if(re.isStr(n)){var t=yi.get(wi),r=[];ue.each(t,function(t){(e!==Un&&t.k!==e||n!==t.c)&&r.push(t)}),yi.set(wi,r)}}};function Oi(t){var n=re.now();return xi<n-t.t}var qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ii=function(){var t=!("undefined"==typeof window||!window.navigator||!window.navigator.userAgent);function e(){return t?navigator.userAgent.toLowerCase():""}function r(t){for(var n={},e=t.replace(/\([^)]+\)/g,"").split(/\s+/),r="",i=0;i<e.length;i+=1){var o=e[i],a=o.lastIndexOf("/");if(a<0)r=o;else{var u=o.slice(0,a);r&&(u=r+" "+u,r=""),n[u]=o.slice(a-o.length+1)}}return n}function c(t){var n=t||"0",e=n.match(/^(\d*)/);return e?Number(e[1]):0}function o(t,n){for(var e="string"==typeof t?t.split("."):["0"],r="string"==typeof n?n.split("."):["0"],i=Math.max(e.length,r.length),o=0;o<i;o+=1){var a=c(e[o]),u=c(r[o]);if(u<a)return 1;if(a<u)return-1}return 0}function a(t){var n=-1,e=document.createElement("iframe");function r(){if(clearTimeout(n),e){var t=e.parentNode;t&&t.removeChild(e),e.onload=null,e.onerror=null,e=null}}e.style.display="none",e.onload=r,e.onerror=r,e.src=t,document.documentElement.appendChild(e),n=setTimeout(r,3e3)}function u(t){window.KNBTitansX&&window.KNBTitansX.sendMessage?window.KNBTitansX.sendMessage(t):window.prompt(t)}function s(t){window.prompt(t)}var n,i={getDefaultSender:function(){var i=Function.prototype,t=e();if(/ios|iphone|ipod|ipad/.test(t))i=a;else if(/android/.test(t)){var n=r(t);i=0<o(n.android,"4.2.0")?u:s}return function(t,n,e){var r="js://_?method="+t+"&callbackId="+e+"&args="+encodeURIComponent(n);i(r)}},compareVersion:o,parseUserAgent:r,canUseSlot:(n=r(e()),0<=o(n.titansx||n.titansnox,"11.13"))},f=i.getDefaultSender,d=i.compareVersion,l=i.parseUserAgent,v=i.canUseSlot,p="function"==typeof Symbol&&"symbol"===qi(Symbol.iterator)?function(t){return void 0===t?"undefined":qi(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":qi(t)},h={sender:null};function m(t){return"DPApp_callback_"+t}function g(t,n){var e=m(t),r=window[e];r&&(r(n),r.isSafeDelete&&(window[e]=void 0))}function _(t){var n=t||"DPApp";if(!window[n]||!window[n].KNBCore){var e={dequeue:window[n]&&window[n].dequeue||Function.prototype,KNBCore:!0,callback:g};window[n]=function(t,n){if(t&&"object"===(void 0===t?"undefined":p(t))){var e=t;return Object.keys(n).forEach(function(t){e[t]=n[t]}),e}return n}(window[n],e)}}var y,b={bindSender:function(t){"function"==typeof t&&(h.sender=t)},sendMessage:function(t,n,e,r){var i=v&&r?"KNBSlot"+r:void 0;_(i);var o=function(t){if(!/^[a-zA-Z0-9]*$/.test(t))throw new Error("illegal slot name");var n=Math.floor(1e3*Math.random());return+(Date.now().toString().slice(-5)+""+n)+(t?"_"+t:"")}(i),a=m(o),u=e||{};window[a]=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.status,e="action"===n?"handle":n;"0"===String(e)&&(e="success"),"handle"!==e&&"success"!==e&&(e="fail");var r=u[e]||Function.prototype;if("function"==typeof r)return r(t)},u.handle||(window[a].isSafeDelete=!0),h.sender&&h.sender(t||"",JSON.stringify(n||{}),o)},fireCallback:g,compareVersion:d,parseUserAgent:l};return y=b,"undefined"!=typeof window&&(h.sender=f(),window.KNBCore||(window.KNBCore=y)),b}(),ji=!1,Ai=[],Di=void 0,Ei=void 0;function Ci(t){ur()?c===Je?t(Un,Ei):ji?t(Di,Ei):(Ai.push(t),ji?t(Un,Ei):new Promise(function(t){t({ready:function(t){return t()},use:function(t,n){n=n||{},Ii.sendMessage(t,{data:n.data||{}},n,"LXAnalyticsSDK")}}),ji=!0}).then(function(t){var n,e,r=Ei=t;n=Di,e=r,ue.each(Ai,function(t){t(n,e)}),Ai=[]})):t(e,Ei)}var Ti=500,Mi="getUserInfo";function Ni(){return new dr(function(o,r){Ci(function(t,n){var e=Rn.DPApp,i=D(function(){o({})},Ti);n?n.ready(function(){n.use(Mi,{success:function(t){var n,e,r;f(i),o((e={},(r=(n=t)[k])&&"0"!==r||"dp"!==n.type?n[k]&&(e[k]=n[k]):e[k]=n[y],"dp"!==n.type&&n[y]&&(e[y]=n[y]),n.unionId&&(e.unionId=n.unionId),n.userId&&(e.userId=n.userId),e))},fail:function(t){f(i),r({code:j})}})}):e&&e[Mi]?e.ready(function(){e[Mi]({success:function(t){f(i);var n={};(t.dpid||t.userId)&&(n.dpid=t.dpid,n.userId=t.userId,n.unionId=t.unionId),o(n)},fail:function(t){f(i),r({code:a,res:t})}})}):r({code:a})})})}var Fi,Ri=void 0,Pi=(Fi=function(){for(var t=1*new Date,n=0;t===1*new Date&&n<200;)n++;return t.toString(16)+n.toString(16)},function(){var t=(screen.height*screen.width).toString(16);return Fi()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var t=Le,n=void 0,e=void 0,i=[],r=0;function o(t,n){var e=void 0,r=0;for(e=0;e<n.length;e++)r|=i[e]<<8*e;return t^r}for(n=0;n<t.length;n++)e=t.charCodeAt(n),i.unshift(255&e),4<=i.length&&(r=o(r,i),i=[]);return 0<i.length&&(r=o(r,i)),r.toString(16)}()+"-"+t+"-"+Fi()});function Li(){var t={mem:Ri,cookie:de.get(pt),ls:yi.get(pt),ss:Ne&&Ne.getItem(pt)},n=void 0;for(var e in t)t[e]&&(n=t[e]);for(var r in n||(n=Pi()),t)if(!t[r])switch(r){case"mem":Ri=n;break;case"cookie":de.top(pt,n,ft);break;case"ls":try{yi.set(pt,n)}catch(t){Xr(location.href,"",n,t.stack||t.message,!0)}break;case"ss":try{Ne&&Ne.setItem(pt,n)}catch(t){Xr(location.href,"",n,t.stack||t.message,!0)}}return n}function Vi(){return Math.floor(1+65535*re.rnd()).toString(16).substring(1)}function Bi(){var t=[],n=+new Date;return t.push(n.toString(16)),t.push(Vi()),t.push(Vi()),t.push(Vi()),t.join("-")}function Ji(t){var n=t.match(/(\d+)(?:\.(\d+)(?:\.(\d+))?)?/),e=[];if(n)for(var r=1;r<n.length;r++)e.push(parseInt(n[r]||0));return e}function Ui(t,n){var e=Ji(t),r=Ji(n);return!(e[0]<r[0])&&(!(e[0]===r[0]&&e[1]<r[1])&&!(e[0]===r[0]&&e[1]===r[1]&&e[2]<r[2]))}var Wi=100,Ki=!1,Qi=void 0,Xi=!1,$i=!1,zi=!1,Hi=[],Gi=0,Zi=void 0,Yi=re.now();function to(t){var n=(t._opts||{}).nativeOptions||{};return{cb:"_lx"+(100*re.now()+Gi++),mn:t._mn,cn:t._cn,data:t._d||{},options:n,ver:4}}function no(t,n,e,r,i){i=i||{};var o=this;o._cn=t,o._mn=n,o._d=e,o._cb=r,o._opts=i}function eo(){return Xi}no.prototype.send=function(e){var r=this,i=to(r),t="statistics://_lx/?data="+Xn(sr.stringify(i)),n=re.now();Zi&&5e3<n-Yi&&"getEnv"===r._mn&&Wi===M?(r._mn,e(0,Zi)):(r._mn,i.cb,function(i,o,a){if(Je!==c||!window.JavaScriptBridge)return Ci(function(t,n){if(t)return a(t);var e=!1,r=D(function(){e=!0,a(d)},5e3);n.use(i,{data:o,success:function(t){if(f(r),!e)if("success"===t.status){var n=t.data||{};try{re.isStr(n)&&(n=sr.parse(n)),a(Un,n.data?n.data:t)}catch(t){a(t)}}else a(E)},fail:function(){f(r),e||a(E)}})});window.JavaScriptBridge.log(o,function(t){var n=t.data;try{re.isStr(n)&&(n=sr.parse(n)),a(Un,n.data?n.data:n)}catch(t){a(t)}})}("lxlog",t,function(t,n){t?(r._mn,i.cb,new Date,T(t)):(r._mn,i.cb,new Date),e(t,n)}))},Qi=function(t,n,e,r,i){if(N===Wi||600===Wi)return r(Wi);var o=new no(t,n,e,Xt,i);if(M===Wi)o.send(function(t,n){r(t,n)});else if(100===Wi){if(Hi.push([o,r]),!Ki){Ki=!0;new Date;new no(t,"getEnv",{}).send(function(r,t){if(new Date,r&&T(r),r)Wi=N;else{if(Wi=M,kn(it),re.isStr(t))try{t=sr.parse(t)}catch(t){}var n=(Zi=t).sdk_ver||"";Xi=Ui(n,"4.0.0"),$i=Ui(n,"4.3.0"),zi=!Ui(n,"4.8.0")}ue.each(Hi,function(t){var n=t[0],e=t[1];r?(T(r),e(r)):n.send(function(t,n){e(t,n)})})})}}else r(F)};var ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},io={},oo=at,ao=[],uo=null,co={s:b,l:_,a:O,w:"wxid",lch:"lch",u:{us:"utm_source",um:"utm_medium",uc:"utm_content",ucp:"utm_campaign",ut:"utm_term"},se:Ft,sc:"scene",v:"_lx_validcode",uni:s,di:k,ui:y,wxi:"wxunionid"},so="_lxsdk_wxenv_",fo=["sdk_ver","ua"];function lo(t){var n=/(^\w+-\w+-\w+-\w+-\w+)/;if(n.test(t)){var e=t.match(n);de.top(vt,e[1],ft)}else t&&!/(^\w+\.\d+\.\d+\.\d+\.\d+)/.test(t)&&t.length<100?de.top(vt,t,ft):de.top(vt,"",-1)}var vo=0,po=1,ho=2,mo="|";function go(){var t=Ln.domain;return"sub"===an.sessionScope?mt+"_"+t:mt}function _o(t){var n=go(),e=de.get(n);return e?e.split(mo)[t]:""}function yo(t,n,e){var r,i,o,a=go();de.top(a,(r=n,i=e,(o=[]).push(t||bo()),o.push(r||wo()),o.push(i||xo()),o.join(mo)),dt)}function bo(){return _o(vo)}function wo(){return _o(po)}function xo(){var t=0,n=_o(ho);return isNaN(n)||(t=parseInt(n)),t<0?0:t}var So,ko=void 0,Oo=(So="_lxsdk_test",de.set(So,"1"),!(-1<Ln.cookie.indexOf(So)&&(de.del(So),1)));function qo(){if(Oo)return ko=ko||0,++ko;var t=xo();return t=t||0,yo(Un,Un,++t),t}function Io(t,c){return new dr(function(a,u){D(function(){u({code:d})},3e3),Qi(t,"getEnv",{},function(t,n){if(t)u(t);else{uo=an.nativeSDKVer=n.sdk_ver,o=an.nativeSDKVer,re.isStr(o)&&(cn.MVL=-1<Ie(o,"4.14.0"),cn.QR=-1<Ie(o,"4.14.0"),cn.getReqId=-1<Ie(o,"4.12.0"));var e={uuid:y,msid:b,uid:x,dpid:k,appnm:O,union_id:s};for(var r in c=c||{},e){var i=e[r];n[r]&&(c[i]=n[r])}a(c)}var o})})}function jo(){var t=de.get(gt);if(t){var n=t.split(","),e=/^\d+\.\d{5,}$/;return 3!==n.length?null:e.test(n[0])&&e.test(n[1])?{lat:n[0],lng:n[1],tm:n[2]}:null}return null}function Ao(t){return re.extend(!0,{},t)}function Do(t){var n=Ln.getElementsByTagName("meta"),e=ge(n,"lx:appnm"),r=ge(n,"lx:defaultAppnm"),i=Je,o=Ln.domain,a=Sn();return vn("appnm",e),vn("defaultAppnm",r),Ue&&Te(Je||e||r||o),We?e||(2===a?t:i||(r||o)):e||(i||(r||o))}function Eo(){var t,n,e,r,i,o,a=Je===m||Je===h||or||ir,u=(t=de.get(vt),n=de.get("iuuid")||de.get("uuid")||t,e=bo(),r=wo(),i=de.get(ht)||de.get(k),o={},n&&(o[y]=n),e&&(o[b]=e),t&&(o[_]=t),r&&(o[x]=r),i&&(o[k]=i),o),c=void 0,s={};a&&(s=function(t){var n={};if(I.test(t)){var e=re.parseQuery(t);if(e[y]&&(n[y]=e[y]),e[w]&&(n[w]=e[w]),e[S]&&(n[x]=e[S]),e.__lxsdk_params){var i={},r=decodeURIComponent(decodeURIComponent(e.__lxsdk_params)).split(";"),o=co.u,a=void 0;ue.each(r,function(t){var n=t.split(":"),e=n[0],r=n[1];if(r)if(o[e])(a=a||{})[o[e]]=r;else{if(!co[e])try{r=Fe(r)}catch(t){}i[e]=r}}),a&&(i[A]=a),i.se||(i.se="online"),n[q]=i}return n}return n}(Pn.href)),Je===m&&(s[y]?(u[y]?s[y]!==u[y]?dn("uuidState","2"):dn("uuidState","3"):(u[y]=s[y],dn("uuidState","1")),delete s[y]):dn("uuidState","0")),(c=re.extend(u,s)).ct=Qe;var f=pi();f&&(c[A]=f);var d=Li();c[_]=d,c[y]||(c[y]=d),c[b]||(c[b]=Bi(),yo(c[b],c.uid||"")),c[y]&&lo(c[y]);var l=Do();re.isStr(l)&&(c[O]=l);var v,p=(v=Jn.replace(/^.*([A-Za-z-]+)\/com\.(sankuai(?!\.meituan\.)|meituan(?!\.sankuai\.)|dianping|sankuai\.meituan|meituan\.sankuai)\.([.A-Za-z0-9-]+)\/(\d+[.\d]+).*$/,"$4"),/^\d+(\.\d+)+$/.test(v)?v:null);return p&&(c.app=p),c}function Co(n){return function(t){var e=t;return n!==t&&(e=re.extend(n,t)),e.dpid&&e.uid?e:Ni().then(function(t){var n={};return t.dpid&&(n.dpid=t.dpid,t.userId&&(n.uid=""+t.userId),t.unionId&&(n.union_id=t.unionId)),e=re.extend(e,n)},function(t){return T(t),e})}}var To=function(t){on();var a=Eo();if(ur()){var n=Io(t,a);return r===Je&&(n=n.then(Co(a),function(t){return T(t),Co(a)()})),n.then(function(t){var n=Do(t[O]),e=t[k],r=t[y],i=t[s],o=t;return t!==a&&(o=re.extend(a,t)),re.isStr(n)&&(o[O]=n),r&&lo(r),e&&de.top(ht,e,ft),i&&de.top("_lxsdk_unoinid",i,ft),o},function(t){return t&&T(t),a})}var e,u=Ao(a),c=u[q];return(e=re.now(),new dr(function(t){if(or||ir)if(/miniProgram/i.test(Jn))t(!0);else if(Rn.WeixinJSBridge&&Rn.WeixinJSBridge.invoke)t("miniprogram"===Rn.__wxjs_environment);else{var n=setTimeout(function(){an.wx_t=re.now()-e,t(!1)},5e3);Ln.addEventListener("WeixinJSBridgeReady",function(){clearTimeout(n),an.wx_t=re.now()-e,t("miniprogram"===Rn.__wxjs_environment)})}else t(!1)})).then(function(t){if(an.inWXMP=t){if(an.nt=ir?7:6,"object"===(void 0===Ne?"undefined":ro(Ne))&&!re.isObj(c))for(var n in c={},Ne)if(0===n.indexOf(so)){var e=n.slice(so.length),r=Ne[n];if(e===A)try{c[A]=JSON.parse(r)}catch(t){}else c[e]=r}var i=function(t){var n=co[t]||t,e=c[t];e&&(u[v]=u[v]||{},u[n]&&(u[v][n]=u[n]),ue.find(fo,function(t){return t===n})||(u[n]=e));try{Ne.setItem(so+n,oe(e)?JSON.stringify(e):e)}catch(t){}};for(var o in c)i(o)}else an.nt=ot;return delete u[q],dr.resolve(u)})};function Mo(t){return ct===oo?dr.resolve(Ao(io)):ut===oo?new dr(function(n){var t;t=function(t){n(t)},ao.push(t)}):(oo=ut,To(t).then(function(e){return io=re.extend(!0,{},e||{}),(or||ir)&&(an._isWXDev=io[Ft]===Pt),oo=ct,ue.each(ao,function(t,n){re.isFunc(t)&&ao[n](e)}),e}))}var No=/([a-fA-F0-9-]+)(\.\d+)/,Fo="_hc.v",Ro=525600,Po="",Lo=/(dper|dianping|51ping)\.com/.test(Vn);function Vo(){return function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}()+"."+Math.round(+new Date/1e3)}function Bo(){return!Po&&Lo&&(Po=function(){var t=de.get(Fo);if(t||(t=Vo(),de.top(Fo,t,Ro)),t){var n=t.match(No);return n?n[1]:""}return""}()),Po}var Jo=function(){var t=void 0;try{var n=document;if(n.querySelectorAll){var e=n.querySelectorAll("head script"),r=n.querySelectorAll("body script"),i=[];ue.each(e,function(t){i.push(t)}),ue.each(r,function(t){i.push(t)});for(var o=0;o<i.length;o++){var a=i[o].innerHTML.match(/\[['"]\s*_setPageId\s*['"]\s*,\s*(\d+)\s*\]/);if(a){t=a[1];break}}}}catch(t){}return function(){return t}}();function Uo(t){var n=this;n.s=t;var e=void 0,r=yi.get(Nt)||{s:t,d:n.d};r.s!==t?(yi.del(Nt),e=n.d=[]):e=n.d=r.d||[],n.l=e&&e.length||0}var Wo=null;function Ko(){return Wo}function Qo(t){return Ne&&re.isFunc(Ne.getItem)?Ne.getItem(t):de.get(t)}function Xo(t,n){return Ne&&re.isFunc(Ne.setItem)?Ne.setItem(t,n):de.top(t,n,dt)}function $o(t){Xo(yt,t)}function zo(){var t=Qo(yt);return t||""}function Ho(t){Xo(_t,t)}function Go(){var t=Qo(_t);return t||""}var Zo="QR",Yo=20480/30,ta=2592e5,na={},ea=void 0,ra=!(Uo.prototype={constructor:Uo,set:function(t,n,e){var r=this,i=r.l,o=r.d,a=r.indexOf(t),u={scid:0<i?o[i-1].scid+1:0,cid:t,bid:n,sf:e};-1<a?o.splice(a,i-a,u):o.push(u),r.l=o.length,yi.set(Nt,{s:r.s,d:o})},indexOf:function(t){for(var n=this.d||[],e=0,r=n.length;e<r;e++){if(n[e].cid===t)return e}return-1},toJSON:function(){var t=this.d;return t&&t.length?t:null}}),ia=[],oa=!1,aa=["ua"].join("|")+"|",ua=["lxcuid","category","sdk_ver","utm","uuid","msid","ct","appnm"],ca=["utm","seq","tm","nm","val_ref","lng","val_lab","req_id","lat","s_from","val_cid","val_bid"];function sa(){if(!ra){var t=te(),n=[ea.opts.cid],e=0,r=function(t,n){if(!t)try{var e=n;if(re.isObj(n)||(e=JSON.parse(n)),0===e.code)(function t(n){var e=0,r=0;var i=[];var o=te()-ta;for(var a in n)e+=n[a].bids.length,r+=n[a].bids.length;if(!r)return;for(var u in na)e+=na[u].bids.length,na[u].tm<o&&i.push(u);Yo<e&&(i.length?(ue.each(i,function(t){delete na[t]}),t(n)):na={});na=re.extend(na,n);setTimeout(function(){yi.set(Zo,na)},10)})(function(t){if(!re.isObj(t))return;var i={},o=te();return ue.each(t,function(n,r){i[r]=i[r]||{cid:r,tm:o,bids:[],envInfo:(n.envInfo||{}).quickReport||[],evsInfo:(n.evsInfo||{}).quickReport||[]},delete n.envInfo,delete n.evsInfo;var t=function(e){var t=n[e].quickReport||[];ue.each(t,function(t){var n={tp:e,id:t};i[r].bids.push(n)})};for(var e in n)t(e)}),i}(e.data)),ra=!0;else{if(304!==e.code)return void e.message;ra=!0}}catch(t){}};for(var i in na)e++,t=Math.min(na[i].tm,t);0===e&&(t=0);var o=("https://ocean.sankuai.com/delivery/api/web-configFile?\n                timestamp="+t+"\n                &cidList="+n.join(",")+"\n                &rnd="+Math.random()).replace(/\s/g,"");"https"===Oe()&&Gr(o,{},{cb:r})||function(t,n,e,r){var i=void 0,o=(r=r||{}).outTime||5e3,a="__lxsdk_jsonp_callback_"+Math.random().toString(16).slice(2,10);/^([^?]+)\?/.test(t)?t=t.replace(/^([^?]+)\?/,"$1?"+n+"="+a+"&"):/^([^#]+)#/.test(t)?t=t.replace(/^([^#]+)#/,"$1?"+n+"="+a+"#"):t+="?"+n+"="+a;var u=Ln.createElement("script");u.src=t,Rn[a]=function(t){clearTimeout(i);try{e(Un,t)}catch(t){}delete window[a]},u.type="application/javascript",u.charset="utf-8",u.setAttribute("async","true"),Ln.body.appendChild(u),i=D(function(){try{e("timeout")}catch(t){}delete window[a]},o),D(function(){Ln.body.removeChild(u)},0)}(o,"callback",r)}}function fa(t,n,e){if(!an.useQR)return!1;if(!na[n])return!1;for(var r=na[n].bids,i=0,o=r.length;i<o;i++){var a=r[i];if(a.tp==t){if(t===R&&a.id==n)return!0;if(a.id==e)return!0}}return!1}function da(t,n,e){var r={},i={};if(t&&na[t]){var o=ua.concat(na[t].envInfo||[]),a=ca.concat(na[t].evsInfo||[]);ue.each(o,function(t){n.hasOwnProperty(t)&&n[t]&&(i[t]=n[t])}),ue.each(a,function(t){e.hasOwnProperty(t)&&aa.indexOf(t+"|")<0&&(r["evs."+t]=e[t])});var u=re.extend(!0,i,r);ia.push(u),f(oa),oa=setTimeout(function(){Gr("https://"+Kt+"/?rnd="+Math.random(),ia,{nm:e.nm,cb:Xt}),ia=[]},0)}}!function(){var t=yi.get(Zo);if(t)try{var n=void 0;n=re.isObj(t)?t:JSON.parse(t),na=re.extend(!0,na,n)}catch(t){}}(),function n(){var e=wu();return new dr(function(t){e?t(e):setTimeout(function(){n().then(t)},100)})}().then(function(t){ea=t,an.useQR&&(Oe(),sa())});var la="category",va="setEvs",pa=5e3,ha={overlen_cutoff:1},ma={code:200,status:200,type:"native-report"},ga={code:Qt,status:200,type:"native-report"},_a="val_bid",ya="page",ba="s_from",wa="lat",xa="lng",Sa=[],ka=Ln.referrer,Oa=[],qa=void 0,Ia=void 0,ja={},Aa=0,Da=0,Ea=function(t,n,e){if(e){var r={},i={custom:r};r[n]=e,t=re.extend(!0,t||{},i)}return t},Ca=function(t,n){var e,r,i=(e=t,r="fn_"+parseInt(1e6*ne()),Re[r]=e,r);return D(function(){Pe(i,{code:-1,status:408,type:"overtime"})},ee(n)&&n||2e3),i};function Ta(t,n){var e=this;e.env=n||{},e.currentEvs={},e.opts=re.extend(!0,{},t),Sa.push(e),En=e}var Ma=Ta.prototype;function Na(t){return 6===t._ptpvs}function Fa(){return!Aa}function Ra(t){return(t=t||{})&&!re.isObj(t)&&(t={cid:""+t}),t}function Pa(e,r,i,o,a){var u=this,c=Ca((a=a||{}).callback,a.callbackTimeout),t=a,n=t.isLeave,s=t.currentPageInfo,f=t.mvDelay,d=t.sf,l=re.isStr(a.category),v=fa(e,r,i);if(Sn()===ot){var p=Ka(u),h=Ga(ki.getAll()),m=$a(e,r,i,o,null,a),g=m.body,_=m.ev,y=Za(p,g,h,a);if(v&&da(r,p,_),e===B){if(f&&!l)return re.run(g,function(t){t[G]&&(t[G].md=f),Oa.push(t)}),void D(function(){if(Oa.length){var t=Za(p,Oa,h,a);u.send(t,{cbkey:c}),Oa=[]}},f*rt)}else{if(e===J)return void Cn.call(u,J,p,g[0],{tag:h});if(e===L){if(s&&function(t,n){re.isObj(t[Ct])||(t[Ct]={});t[Ct][ya]=n}(_,u._cpi),y=Za(p,g,h,a),n){var b=xe(),w=Xa(P,r,Un,b);y.evs.push(w),$o(r),Ho(qa)}Ue&&d&&Ko().set(r,i,d)}}u.send(y,{nm:e,cbkey:c})}else{var x=u.env,S=void 0,k=Qa({isQuickReport:v}),O=[Ha.call(u,e,r,i,o)];if(e===L&&(S={sf:d},u._cpi&&(S.cpi=u._cpi),O=[Ha.call(u,e,r,i,o,null,S)],n)){var q=xe(),I=Ha.call(u,P,r,null,q);O.push(I),$o(r),Ho(qa)}x[A]&&(O=function(t,n){if(!ue.isArray(t)||!t.length)return t;if(!re.isObj(t[0][Ct]))return t[0][Ct]={page:{utm:n[A]}},t;if(!re.isObj(t[0][Ct][ya]))return t[0][Ct][ya]={utm:n[A]},t;return t[0][Ct][ya]=re.extend(!0,t[0][Ct][ya],{utm:n[A]}),t}(O,x));var j=re.isStr(a.category)&&a.category||x[la];new Date;Qi(Wa(j),va,O,function(t,n){t?(kn(ot),T(t),new Date,Pe(c,ga),Pa.call(u,e,r,i,o,a)):(Pe(c,ma),new Date)},{nativeOptions:k})}}function La(){return qa||(qa=Ba()),qa}function Va(t){var n=yi.get(p);return n&&t&&yi.del(p),n}function Ba(){return re.now().toString(16)+"-"+Math.floor(65535*re.rnd())+"-"+Math.floor(65535*re.rnd())}function Ja(t){var n,e,r=t.nm;R===r?(t.nm="mpt",t.val_act="pageview"):P===r?(t.nm="report",t.val_act="quit"):(t.nm="mge",t.event_type=(n=r,(e={})[W]="order",e[K]="pay",e[L]="click",e[U]="return",e[B]="view",e[V]="click",e[n]||r)),t.nt=0,t.isauto=8}function Ua(t){var n="data_sdk_";return 0!==t.indexOf(n)&&(t=n+t),t}function Wa(t){var n="data_sdk_";return 0===t.indexOf(n)&&(t=t.replace(n,"")),t}function Ka(t){var n=re.extend(!0,{},t.env);n[la]=Ua(n[la]);var e=bo();e||yo(e=Bi(),n.uid||""),an.inWXMP&&re.isObj(n[v])&&re.isObj(t.env[v])?n[v][b]=t.env[v][b]=e:n[b]=t.env[b]=e;var r=n.utm,i={ua:Le,sdk_ver:g,ch:r&&r.utm_source?r.utm_source:"web",sc:nr};i[jt]=g,an.debug&&(i._misid=an.debug);var o=re.extend(!0,i,n);return an.isDev||an._isWXDev?o[Ft]=Pt:o[Ft]=Rt,We&&!wn()&&delete o.ch,o}function Qa(t){return(t=t||{}).isQuickReport=sn("QR")&&!!t.isQuickReport,t}function Xa(t,n,e,r,i,o){i=i||C,o=o||{};var a,u,c,s=qo(),f=jo(),d=re.isObj(r)&&r.custom||{},l=void 0,v=R===t,p=W===t,h=K===t,m={nm:t,tm:re.now(),nt:an.nt,isauto:i,val_cid:n,req_id:La(),seq:s,lx_inner_data:re.extend(!0,{},ln())};if(v){var g=Pn.href;m.url=g,(l=ka)&&(m.refer_url=l),i===C&&(ka=g)}(p||v||h)&&Ue&&(a=m,(u=Ko().toJSON())&&(a[ba]=u),m=a),r=Ea(r,"_hguid",Bo()),(c=r)&&c.custom&&"v3"===c.custom._api&&!n&&(m.val_cid=Ln.title||Pn.pathname,r=Ea(r,"_cid",1)),re.isObj(d)&&"v3"===d._api&&(m[G]._api="v3",delete d._api),Ue&&o.sf&&(m[G].use_sfrom=1);try{m[G].ht=wn()}catch(t){}return v&&(r=Ea(r,"_hpid",Jo()),r=Ea(r,"_lx_cv","prod"),an.wx_t&&(r=Ea(r,"_wx_t",an.wx_t))),e&&(m[_a]=e),an.geo?(m[wa]=an.geo.lat,m[xa]=an.geo.lng):f&&(m[wa]=f.lat,m[xa]=f.lng),r&&(JSON.stringify(r).length>=pa&&(r=ha),(m[Ct]=r).lat&&r.lng&&(m[wa]=r.lat,m[xa]=r.lng)),m}function $a(t,n,e,r,i,o){var a=Xa(t,n,e,r,i,o);return{body:function(t){{if(Oa&&0<Oa.length){var n=Oa;return Oa=[],n.push(t),n}return[t]}}(a),ev:a}}function za(t){return Ke?t:Be&&!zi?t:Xn(t)}function Ha(t,n,e,r,i,o){i=i||C;var a=(o=o||{}).fromWA,u=this.env.appnm,c=jo(),s=!On,f=void 0,d={nm:t,tm:re.now(),nt:it,isauto:i,val_cid:n,shouldCover:s,lx_inner_data:re.extend(!0,{},ln())};d=re.extend(!0,d,ja),Ia&&(d.req_id=Ia),o.sf&&(d[G].use_sfrom=1,d._sf=o.sf);var l=void 0,v=re.extend(!0,{},r||{}),p=R===t;if(p){var h=za(Pn.href);l={ua:Le,url:h,_fromWA:!!a};var m=pi();m&&m.utm_source&&(l.utm=m),(f=ka)&&(l.refer_url=za(f)),i===C&&(ka=h)}else l={};return d=re.extend(d,{web_cid:n,web_req_id:La(),web_refer_cid:zo(),web_refer_req_id:Go(),web_first_pv:!!(Da<=1&&Rn.history&&1===Rn.history.length)}),ue.each({web_req_id:La(),web_sdk_ver:g,lxcuid:Li(),web_appnm:u},function(t,n){re.isStr(t)&&(l[n]=t)}),re.isObj(v.custom)&&"v3"===v.custom._api&&(l.web_appnm=function(t){if(re.isStr(t))return t&&rn[t]||rn}("appnm"),d[G]._api="v3",delete v.custom._api),o.cpi&&!v.page&&(v.page=o.cpi),v.custom=re.extend(!0,v.custom,l),v=Ea(v,"_hguid",Bo()),p&&(v=Ea(v,"_hpid",Jo())),t!==V||$i?eo()||Ja(d):eo()?d.nm=L:Ja(d),c&&(d[wa]=c.lat,d[xa]=c.lng),e&&(d[_a]=e),v&&JSON.stringify(v).length>=pa&&(v=ha),d[Ct]=v,p&&!eo()&&(d.val_val=v,delete d[Ct]),d}function Ga(t){return t}function Za(t,n,e,r){var i=(r=r||{}).category;return ue.isArrayLike(n)||(n=[n]),re.run(n,function(t){t&&e&&(t.tag=e)}),t.evs=n,re.isStr(i)&&(t[la]=Ua(i)),t}function Ya(t,n){var e={};return e[et]=n,re.extend(e,t)}function tu(e,t,n,r){var i,o,a,u,c=(i=t,o=n,a=r,u=null,!re.isStr(i)||o||a?re.isObj(i)&&re.isStr(o)&&!a&&(u=o,o=null):(u=i,i=null),u&&(a=re.extend({cid:u},a||{})),{lab:i,env:o,opts:a}),s=c.lab,f=c.env;r=Ra(c.opts);var d=e.opts.cid=r.cid||e.opts.cid;r=re.extend({cid:d},r),f&&re.isObj(f)&&ue.each(f,function(t,n){e._dt.set(n,t,Un,!0)}),e._dt.pageView(s,r)}function nu(t,n){this.env=t||{},this.opts=n||{},this._t=[]}Ma.set=function(t,n,e,r){var i=this,o=i.env,a=an.inWXMP&&re.isObj(o[v]);if(re.isObj(t))se(t,function(t,n){i.set(n,t)});else if((t!==la||n)&&t!==Ft)if(!r&&a&&o[v][t]?o[v][t]=n:o[t]=n,"utm"===t&&re.isObj(n)&&!a&&vi(n),vn(t,n),O===t&&Te(n),it!==Sn()||Vt[t])re.isFunc(e)&&e(o,i);else{var u={},c=Wa(o[la]);u[t]=n,Qi(c,"setEnv",u,function(){re.isFunc(e)&&e(o,i)})}},Ma.get=function(t,n){re.isFunc(n)&&n(this.env[t],this)},Ma.pageView=function(e,r){r=Ra(r)||{};var t=void 0,i=this,n=r.fromWA,o=r.withlab,a=Ca(r.callback,r.callbackTimeout),u=i.opts.cid,c=r.cid||u,s=r.isauto||C,f=r.isAutoInit,d=r.reportStatus,l=u&&!(Na(i)||f)&&!Fa(),v=d===ot||ot===Sn(),p=i.env;if(n&&o?(s=6,e=this._cpi||{}):this._cpi=e,l&&!hn()){var h=xe();t=v?Xa(P,u,null,h):Ha.call(i,P,u,null,h),$o(c),Ho(qa)}pn(0),u&&(Na(i)||Fa())||(qa=Ba()),i.opts.cid=c;var m=fa(R,c);if(v){var g=Ka(i),_=Ga(ki.getAll()),y=$a(R,c,null,e,s),b=y.body;l&&t&&b.unshift(t);var w=Za(g,b,_,r);m&&da(c,g,y.ev),this.send(w,{nm:R,cbkey:a}),Da++,f||Aa++}else{var x=Qa({isQuickReport:m,shouldCoverCid:!0,needCachePD:!0}),S=[Ha.call(i,R,c,null,e,s,{fromWA:n})];l&&t&&S.push(t);var k=re.isStr(r.category)&&r.category||p[la];Qi(Wa(k),va,S,function(t,n){t?(kn(ot),Pe(a,ga),i.pageView(e,r),Xr(Pn.href,"native-report-error",i.env.union_id,T(t))):(Da++,f||Aa++,Pe(a,ma))},{nativeOptions:x})}i.currentEvs={cid:c,req_id:La(),refer_cid:zo(),refer_req_id:Go()},i._ptpvs=f?6:C,we()},Ma.pageDisappear=function(e,r){if(0!==Da){r=re.extend({},r);var i=this,t=r.cid||i.opts.cid,n=r.shouldStore;pn(l);var o=xe();if(e=re.extend(o,e),$o(t),Ho(qa),ot===Sn()){var a=Za(Ka(i),Xa(P,t,null,e,r.isAuto),Ga(ki.getAll()),r);if(Ue&&n&&yi.nt){Ce()&&(an.inWXMP&&re.isObj(a[v])&&a[v][O]?a[v][O]=Me():a[O]=Me());var u=Va()||[];ue.isArray(u)?yi.set(p,u.concat(a)):yi.set(p,[a])}else i.send(a)}else{var c=this.env,s=Qa(),f=[Ha.call(i,P,t,null,e)],d=re.isStr(r.category)&&r.category||c[la];Qi(Wa(d),va,f,function(t,n){t&&(kn(ot),i.pageDisappear(e,r))},{nativeOptions:s})}Nn()}},Ma.systemCheck=function(e,r,i){i=re.extend({},i);var o=this,t=i.cid||o.opts.cid,n=!!i.isLXLog;if(ot===Sn()){var a=Ka(o),u=Za(a,$a(V,t,e,r).body,Ga(ki.getAll()),i);n&&(a.category="others"),this.send(u)}else{var c=o.env,s=Qa(),f=[Ha.call(o,V,t,e,r)],d=re.isStr(i.category)&&i.category||c[la];n&&(d="others"),Qi(Wa(d),va,f,function(t,n){t&&(kn(ot),o.systemCheck(e,r,i))},{nativeOptions:s})}},Ma.moduleView=function(t,n,e){var r=(e=re.extend({},e)).cid||this.opts.cid;e.mvDelay=this.opts.mvDelay||e.delay,Pa.call(this,B,r,t,n,e)},Ma.moduleViewList=function(t,n,e){var r=(e=re.extend({},e)).cid||this.opts.cid;e.mvDelay=this.opts.mvDelay||e.delay;var i=sn("MVL");Sn()!==it||i?Pa.call(this,J,r,t,n,e):Pa.call(this,B,r,t,n,e)},Ma.moduleClick=function(t,n,e){var r=(e=re.extend({},e)).cid||this.opts.cid;e&&e.isLeave&&pn(l),e.currentPageInfo=e.withPageInfo&&re.isObj(this._cpi)?this._cpi:Un,Pa.call(this,L,r,t,n,e)},Ma.moduleEdit=function(t,n,e){var r=(e=re.extend({},e)).cid||this.opts.cid;Pa.call(this,U,r,t,n,e)},Ma.order=function(e,r,i){i=re.extend({},i);var o=this,a=Ca(i.callback,i.callbackTimeout),t=i.cid||o.opts.cid;Se(0,r);var n=fa(W,t,e);if(ot===Sn()){var u=Ka(this),c=$a(W,t,e,r),s=c.body,f=Ga(ki.getAll()),d=Za(u,s,f,i);n&&da(t,u,c.ev),this.send(d,{cbkey:a})}else{var l=this.env,v=Qa({isQuickReport:n}),p=[Ha.call(o,W,t,e,r)],h=re.isStr(i.category)&&i.category||l[la];Qi(Wa(h),va,p,function(t,n){t?(kn(ot),Pe(a,ga),o.order(e,r,i)):Pe(a,ma)},{nativeOptions:v})}},Ma.pay=function(e,r,i){i=re.extend({},i);var o=this,a=Ca(i.callback,i.callbackTimeout),t=i.cid||o.opts.cid;Se(0,r);var n=fa(K,t,e);if(ot===Sn()){var u=Ka(o),c=$a(K,t,e,r),s=c.body,f=Ga(ki.getAll()),d=Za(u,s,f,i);n&&da(t,u,c.ev),this.send(d,{cb:function(t,n,e){ki.clear(),Pe(a,{code:t,status:n,type:e})}}),o.clearTag()}else{var l=this.env,v=Qa({isQuickReport:n}),p=[Ha.call(o,K,t,e,r)],h=re.isStr(i.category)&&i.category||l[la];Qi(Wa(h),va,p,function(t,n){t?(kn(ot),Pe(a,ga),o.pay(e,r,i)):Pe(a,ma)},{nativeOptions:v})}},Ma.tag=function(e,t,n,i){var r=void 0,o=void 0,a=this.env,u=arguments,c=[],s=function(t){if(!re.isObj(t))return t;for(var n=t,e=0,r=c.length;e<r;e++){if(!n)return n;n=n[c[e]]}return n},f=function(){ue.each(u,function(t){if(!re.isStr(t))return!1;c.push(t)})},d=function(t,n,e){var r={};r[t]=n,o=Wa(a[la]),Qi(o,"setTag",r,function(t,n){i&&(e&&f(),i(t,s(n),!0))})},l=function(t){var n=ki.getAll();t||f(),i&&i(0,s(n),!1)};if(ue.each(u,function(t){re.isFunc(t)&&(i=t)}),re.isObj(e)){var v=this;ue.each(e,function(t,n){v.tag(n,t)})}else re.isStr(e)&&re.isObj(t)?ot!==Sn()?d(e,r=t,!0):(se(t,function(t,n){ki.set(e,n,t)}),l(!0)):(re.isObj(n)||re.isStr(n))&&function(t){if(!re.isStr(t)&&!t.length)return!1;return!0}(e)&&re.isStr(t)?ot!==Sn()?((r={})[t]=n,d(e,r,!0)):(ki.set(e,t,n),l(!0)):re.isFunc(e)||re.isFunc(t)||re.isStr(e)&&re.isStr(t)&&re.isFunc(n)?ot!==Sn()?(f(),o=Wa(a[la]),Qi(o,"getTag",{},function(t,n){i&&i(t,s(n),!0)})):l():i&&i(-1)},Ma.clearTag=function(t,n,e){var r=0;ot===Sn()?(re.isFunc(t)&&(e=t,t=Un),ki.clear(t,n),e&&e(0)):r=-1,e&&e(r)},Ma.sfrom=function(r){var i=void 0,t=void 0,n=this.env;ot!==Sn()?(t=Wa(n[la]),Qi(t,"getSFrom",{},function(t,n){if(n){var e=n.data?n.data:n;i=re.isStr(e)?JSON.parse(e):e,r(t,i)}})):r(1,[])},Ma.send=function(t,r){var n=[];r=re.extend({cb:function(t,n,e){r.cbkey&&Pe(r.cbkey,{code:t,status:n,type:e})}},r),re.run(t,function(t){Ce()&&(an.inWXMP&&re.isObj(t[v])&&t[v][O]?t[v][O]=Me():t[O]=Me()),n.push(t)});var e=Va(!0);e&&ue.isArray(e)&&(n=e.concat(n)),$r(n,r)},Ma.getAll=function(){return Sa};var eu=nu.prototype;eu.create=function(t,n){var e=re.extend({},this.env);e=re.extend(e,{category:t});var r=re.extend({isDefault:!1},this.opts),i=new Ta(r=re.extend(r,n||{}),e);return this._t.push(i),n.isDefault&&(this._dt=i),i},eu.config=function(t,n){if("isDev"!==t||!an._lockSDKENV)return Un!==t&&(an[t]=n),"cid"===t&&ae(n)&&(this.opts.cid=n),an[t]},eu._initPV=function(t,n){tu(this,this.config("pageValLab"),t=re.extend(t,this.config("pageEnv")),{isauto:6,cid:n,isAutoInit:!0})},eu.pageView=function(t,n,e){tu(this,t,n,e)},eu.moduleView=function(t,n,e){this._dt.moduleView(t,n,e)},eu.moduleViewList=function(t,n,e){this._dt.moduleViewList(t,n,e)},eu.systemCheck=function(t,n,e){this._dt.systemCheck(t,n,e)},eu.moduleClick=function(t,n,e){this._dt.moduleClick(t,n,e)},eu.moduleEdit=function(t,n,e){this._dt.moduleEdit(t,n,e)},eu.order=function(t,n,e,r){this._dt.order(t,Ya(e,n),r)},eu.pay=function(t,n,e,r){this._dt.pay(t,Ya(e,n),r)},eu.pageDisappear=function(t,n){this._dt.pageDisappear(t,n)},eu.tag=function(t,n,e,r){this._dt.tag(t,n,e,r)},eu.sfrom=function(t){this._dt.sfrom(t)},eu.clearTag=function(t,n,e){this._dt.clearTag(t,n,e)},eu.setGeoLocation=function(t,n){if(null!==t){if(ee(t)&&ee(n))n=n.toString(),t=t.toString();else if(!/^\d+\.\d+$/.test(t)||!/^\d+\.\d+$/.test(n))return;an.geo={lat:n,lng:t}}else an.geo=null},eu.getAll=function(t){t&&t(this._t)},eu.getTracker=function(n,t){var e=ue.find(this._t,function(t){return t.env.category===n});t&&t(e)},eu.get=function(t,n){this._dt.get(t,n)},eu.set=function(t,n,e){this._dt.set(t,n,e)},eu._setRequestID=function(t){Ia=t},eu._setNativeEvsData=function(t,n){var e;e=n,ja[t]=e};var ru=void 0,iu=!0,ou=function(){var t;if(!!!an.onWebviewAppearAutoPV)return t=an.c,void wu().getTracker(t,function(t){var n=t.env.category,e=re.extend({refer_cid:zo(),refer_req_id:Go()},t.currentEvs);ue.each(e,function(t,n){e["web_"+n]=t,delete e[n]}),Qi(n,"setWebPageData",e,function(t,n){})});we(),xu(),ru.pageView(Un,Un,{fromWA:!0,withlab:!!an.positiveLab}),pn(0)},au=function(){!!an.onWebviewAppearAutoPV&&(hn()||(pn(l),ru.pageDisappear({})))},uu=function(){iu=!0,ou()},cu=function(){iu=!1,au(),Nn()},su=function(){iu&&ou()},fu=function(){iu&&(au(),Nn())},du=void 0,lu=!!/\d\.\d\.\d/.test(rr)&&0<=Ie(rr,"11.3.0");function vu(t,n){re.isStr(t)&&(n=re.isFunc(n)&&n||function(){},"on"+t in Rn||"KNB:"+t in Rn?re.on(window,t,function(t){n(t)}):(du=window.KNB)&&re.isFunc(du.subscribe)&&du.subscribe({action:t,handle:function(){n()},success:function(){},fail:function(t){}}))}var pu={hook:function(){try{vu("appear",uu),vu("disappear",cu),lu&&(vu("foreground",su),vu("background",fu))}catch(t){Xr("sdk","api-error","",t.stack,!0)}ru=wu()}},hu=["setGeoLocation"].join("|"),mu=[],gu=at,_u=void 0,yu=void 0;function bu(t,n){return{cb:t,cmd:n}}function wu(){return _u}function xu(){var n,r;qn(!1),(n=yu,r={none:!0},new dr(function(e){try{var t=Ie(uo,"4.12.0");!uo||!ee(t)||t<0?e(r):n&&Je||ur()?Qi(n,"getReqId",{},function(t,n){e(t?r:n)}):e(r)}catch(t){e(r),Xr("sdk","api-error","",t.stack,!0)}})).then(function(t){var n=t||{},e=n.val_ref,r=n.req_id,i=n.refer_req_id,o=!!(r||e||i);r&&_u._setRequestID(r),e&&_u._setNativeEvsData("val_ref",e),i&&_u._setNativeEvsData("refer_req_id",i),qn(o)})}function Su(t,n){if(ct===gu)t&&t(_u);else if(ut===gu)t&&mu.push(bu(t,n));else{re.now();mu=mu.concat(bu(t,n));var e=Ln.getElementsByTagName("meta"),o=ge(e,"lx:cid")||an.cid;if(!(yu=an.c=ge(e,"lx:category")))return void(gu=at);gu=ut;var a=ge(e,"lx:mvDelay");a=isNaN(a)?0:parseInt(a,10);var u="off"!==ge(e,"lx:autopv");an.autoPV=u,D(xu,1e3),dr.all([Mo(yu)]).then(function(t){var n,r=t[0],e=r.appnm;!re.isStr(e)||Ln.domain,_u=new nu(r,{cid:o,isDefault:!0,mvDelay:a}),yu&&_u.create(yu,{isDefault:!0}),r=re.extend(!0,_u._dt.env,r),_u._dt.env=r,re.now();try{var i=[];ue.each(mu,function(t){var n=t.cb,e=t.cmd;"config"===e||"set"===e||-1<hu.indexOf(e)?n(_u,r):i.push(t)}),Ue&&(n=r.msid,Wo||(Wo=new Uo(n))),u&&yu&&o&&o&&_u._initPV(r,o),pu.hook(function(){}),ue.each(i,function(t){t&&t.cb&&t.cb(_u,r)})}catch(t){}}).then(function(){gu=ct,Mr.check()},function(t){throw gu=ct,t})}}var ku=[["click",tt],["tap",tt],["view","moduleView"],["return","moduleEdit"],["order",nt],["pay","pay"]],Ou=ue.reduce(ku,function(t,n){return t[n[0]]=n[1],t},{}),qu=[["mpt",Z],["report","pageDisappear"]],Iu=ue.reduce(qu,function(t,n){return t[n[0]]=n[1],t},{}),ju=ue.reduce(["config","event","send","use"],function(t,n){return t[n]=!0,t},{}),Au=function(t,n){var e=Ln.getElementsByTagName("head")[0],r=Ln.createElement("meta");r.setAttribute("name",t),r.setAttribute("from","v3api"),r.setAttribute("content",n),e.appendChild(r)},Du=function(e,t){return e=e||{},se(t,function(t,n){1==={act:1,cid:1,val:1,lab:1,bid:1}[n]?e["val_"+n]=t:e[n]=t}),e},Eu=function(t,n,e){(t&&!oe(t)&&(t={custom:{_lab:t}}),!t&&e&&(t={}),e)&&((t.custom=t.custom||{})[n]=e);return t},Cu=function(t,n,e){return t&&!oe(t)&&(t={custom:{_lab:t}}),t&&(t[n]=e),t},Tu=function(t,n){var e=t[Ct],r=t[Mt];if(e&&e===r&&(r=ie(!0,{},r)),n&&(r||e)){var i=e;e=r||{},i&&(e=Eu(e||{},"_lab",i))}else if(!n&&(r||e)){if(ae(r)&&(r={analyse_val:r}),ae(e))e={val_lab:e};r&&(e=Cu(e||{},"page",r))}return Un!==t[X]&&(e=Eu(e||{},"_act",t[X])),Un!==t[Q]&&(e=Eu(e||{},"_et",t[Q])),Un!==t[z]&&(e=Cu(e||{},z,t[z])),Un!==t[H]&&(e=Eu(e||{},"_el_id",t[H])),e};function Mu(t){var n,e,r,i=(e=(n=t).split("."),r=void 0,2===e.length&&(n=e[1],r=e[0]),[n,r]),o=void 0;return i[1]&&(o=i[1]),[t=i[0],o]}var Nu=function n(e,t){var r=Mu(e);e=r[0];var i=r[1],o=t[0],a=t[1];if(ue.isArray(o))return fe(o,function(t){return n(i?i+"."+e:e,[t,a])});var u,c,s=(o.nm||"mge").toLowerCase();o.nm=s,(c=(u=o).val)&&(Du(u,c),delete u.val),o=u;var f="mge"===s;if("mpt"===s)return function(t){t=Du(t,t.val);var n=Tu(t,!0);return[Z,n,null,t[$]]}.apply(null,t);var d,l,v=nt===s,p="pay"===s,h=o[Q],m=o[X],g=Tu(o,!1);v||p||h||!f||!m?p||v?e=s:(l=h,e="mge"===(d=s)?l?Ou[l]||Y:tt:"mpt"===d||"report"===d?Iu[d]:Y,f||(g=Eu(g||{},"_nm",s))):e=tt;var _=o[$];return _&&((a=a||{}).cid=_),i&&Eu(g,"_logchannel",i),Eu(g=g||{},"_api","v3"),e===nt||"pay"===e?[e,o[Tt],g.order_id,g,a]:[e,o[Tt],g,a]},Fu=function t(){if(!t.f){Au("lx:autopv","off"),t.f=!0}},Ru=function(t){if(!t||!t.length)return t;try{var n=t[0];0<(a=(o=n).indexOf("."))&&(o=o.substr(a+1)),ju[o]&&(t=ue.slice(t,1),Pu(n)?(Ee(3),Fu(),t=Nu(n,t)):Lu(n)?(Ee(3),Fu(),t=function(t,n){var e=Mu(t)[1];t=Z;var r=n[1],i=n[2],o=e?{custom:{_logchannel:e}}:Un,a={};if(ae(r))oe(i)?o=i:ae(i)&&(o=Eu({},"analyse_val",i));else if(oe(r)){i=(a=Du(a,r))[Mt],ae(i)&&(i=Eu({},"analyse_val",i)),o=i;var u=a[Ct];u&&Eu(o,"_lab",u),r=a[$]}var c=void 0;return r&&((c={}).cid=r),[t,o=Eu(o,"_api","v3"),Un,c]}(n,t)):Vu(n)?(Ee(3),Fu(),t=function(t,n){var e=n[0],r=n[1];if(e&&(e=e.replace(/^data_sdk_/i,""),Au("lx:category",e)),oe(r))return["set",r]}(0,t)):Bu(n,t[0],t[1])?(Fu(),e=n,r=t[0],i=t[1],t="appnm"===r&&ae(i)?void Au("lx:appnm",i):("cid"===r&&ae(i)&&Au("lx:cid",i),[e,r,i])):t.unshift(n))}catch(t){}var e,r,i,o,a;return t},Pu=function(t){var n=t.indexOf(".");return 0<n&&(t=t.substr(n+1)),"event"===t},Lu=function(t){var n=t.indexOf(".");return 0<n&&(t=t.substr(n+1)),"send"===t},Vu=function(t){return"use"===t},Bu=function(t,n){var e=!1;return"cid"!==n&&"appnm"!==n||(Ee(3),e=!0),"config"===t&&e},Ju=void 0,Uu=void 0;function Wu(t,n,e,r,i){if(re.isFunc(n))n.call(t,t,r,i);else if(!i&&re.isStr(n)){if(re.isFunc(t[n]))return t[n].apply(t,e);if("onLoad"===n)try{e[0](re.extend(!0,{},r))}catch(t){}}}function Ku(){if(!Uu){Uu=!0;var r=void 0;Xe&&re.on(Ln,"mouseup",function(t){var n=t.target||t.srcElement,e=n.tagName+n.href;e=e.toLocaleLowerCase(),1===n.nodeType&&/^ajavascript:/i.test(e)&&(r=new Date)});var t=Rn.onbeforeunload;Ue&&Ke?Rn.addEventListener("pagehide",je(!1,Xe,r,void 0,Qu,Un,hn)):Rn.onbeforeunload=je(!1,Xe,r,void 0,Qu,t,hn)}}function Qu(r){try{var t=document.getElementById("__lxsdk_devltool_message_node");if(t){var n=new CustomEvent("lxsdk",{detail:{args:JSON.stringify(arguments)}});t.dispatchEvent(n)}}catch(t){}var e=arguments;if(e.length){var i=ue.slice(e,1,e.length);try{Ju?Wu(Ju,r,i,Ju._dt?Ju._dt.env:null):Su(function(t,n,e){Wu(Ju=t,r,i,n,e),Ku()},r)}catch(t){try{Xr("sdk","api-error","",t.message+"\n"+t.stack,!0)}catch(t){}}}}window._lxsdk_isDOMReady||(window._lxsdk_isDOMReady=!0,function(){var s=!0,f=!1,d=function(){var t=_e();t&&(t.q.push=function n(t){try{var e,r=(e=Ru(t))?e[0]:"";if(ue.isArray(r))return void se(e,function(t){n(t)});"start"===r?(s=!0,f||l(d)):!1===s?e&&d.push(e):Qu.apply(Un,e)}catch(t){try{Xr("sdk","api-error","",t.stack,!0)}catch(t){}}});for(var n=void 0,e=void 0,r=[],i=[],o=[],a=t&&ue.isArray(t.q)?t.q:[],u=0,c=a.length;u<c;u++)"config"===(e=a[u][0])?i.push(a[u]):n||"use"!==e?o.push(a[u]):(r.push(a[u]),n=!0);return a=i.concat(r.concat(o))}();function l(t){f||(t&&ue.each(t,function(t){var n,e=(n=Ru(t))?n[0]:"";ue.isArray(e)?se(n,function(t){Qu.apply(Un,t)}):e?Qu.apply(Un,n):t&&t&&t[0]}),Qu(function(){Ku()}),f=!0)}if(0===d.length)Su(function(t){Ju=t,Ku()});else try{d=fe(d,function(t){var n;if("config"===((n=Ru(t))?n[0]:"")){var e=n[1],r=n[2];"autoStart"===e&&!1===r&&(s=!1)}return n}),s&&l(d)}catch(t){}}())}();
